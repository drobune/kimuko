<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>テンプレート</title>
<link rel="stylesheet" href="doc-styles.css" type="text/css"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
<h3>Movable Typeユーザー・マニュアル: テンプレート</h3>
<p><a href="mtmanual.html">≪ 目次</a></p>


<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#templates">テンプレート</a></li>
	<ul>

		<li><a href="#index_templates">インデックス・テンプレート</a></li>
		<li><a href="#archive_templates">アーカイブ・テンプレート</a></li>
		<li><a href="#template_modules">テンプレート・モジュール</a></li>
		<li><a href="#miscellaneous_templates">その他のテンプレート</a></li>
		<li><a href="#editing_a_template">テンプレートの編集</a></li>
		<li><a href="#default_templates">デフォルト・テンプレート</a></li>
	</ul>

</ul>
<!-- INDEX END -->

<hr/>
<p>
</p>
<h1><a name="templates">テンプレート</a></h1>
<p>Movable Typeのテンプレートは、あなたのサイトのデザインとレイアウトを定義します。 テンプレートは、どこにコンテンツ（エントリーとアーカイブ）を置き、どんなコンテンツにするか、などを記述しています。 通常、テンプレートはHTMLで作成され、Movable Typeのテンプレートのタグと変数が埋め込まれています（<a href="./mtmanual_tags.html">テンプレートのタグ</a>を参照)が、Movable Typeは、これ以外にもプレーン・テキスト、SSI（サーバーサイド・インクルード）を含むHTML、PHP、およびほかのテキスト形式の言語を生成できます。</p>
<p>ウェブログのテンプレートの編集や、新しいテンプレートの定義には、Movable Typeにログインし、ウェブログを選択して、「<em>テンプレート</em>」をクリックします。</p>
<p>Movable Typeには数種類のテンプレートがあります。</p>
<p>
</p>
<h2><a name="index_templates">インデックス・テンプレート</a></h2>
<p>インデックス・テンプレートはメインのエントリー・リストです。 Movable Typeが他のほとんどのウェブログ管理システムと異なるのは、複数のインデックス・テンプレートをサポートする点です。これは、メインのエントリー・リストを、たとえば、HTMLのリスト、XMLのリストといったように数種類のフォーマットで公開できることを意味しています。 デフォルトではインデックス・テンプレートは、現在からさかのぼった<code>N</code>日までのエントリーを表示します。<code>N</code>日の「<code>N</code>」は、ウェブログの設定の中で指定します。 たとえばインデックスに表示される日数を<code>7</code>に指定すると、Movable Typeはデフォルトで、すべてのインデックス・テンプレート上で、過去7日間のエントリーを表示します。 7日間というのは、今日からさかのぼった過去の７日間を指し、<em>エントリーを投稿した日から過去7日間という意味ではありません。</em> したがって過去7日間(7日目を今日として)の3日目に投稿した場合は、その3日間の投稿がメイン・インデックスにリストされます。</p>
<p>上記にあるように、過去<code>N</code>日間のエントリーを表示するのは、インデックス・テンプレートのデフォルト設定です。この設定は、後述の<code>MTEntries</code>タグを使って変更可能です。たとえば、RSSシンジケート用のRSSインデックスを、日数に関係なく過去15エントリーが表示されるよう設定できます。</p>
<p>
</p>
<h2><a name="archive_templates">アーカイブ・テンプレート</a></h2>
<p>アーカイブ・テンプレートは、ウェブログ・アーカイブの外観や使い勝手を定義します。 選択した各アーカイブの種類（「<a href="./mtmanual_archiving.html">アーカイブの設定</a>」を参照）に対して、複数のアーカイブ・テンプレートを関連付けられるので、アーカイブしたエントリー群を異なる表示形式に設定できます。 たとえば、月毎のアーカイブに対し、エントリーを月毎にまとめて見せてくれるページと、月毎にカレンダー表示するページの2種類の表示形式を作成することができます。 あるいは異なるテンプレートを使って、アーカイブをハイテク風にも手作り風にも見せることができます。</p>
<p>ある種類のアーカイブが再構築されると、同じ種類のアーカイブに属するすべてのテンプレートも再構築されるため、ある種類のアーカイブの複数の表示形式が自動的に維持されます。</p>
<p>Movable Typeには以下の3つのアーカイブ・テンプレートが搭載されています: 日付に基づくテンプレート（<code>月別</code>、<code>週別</code>、<code>日別</code>)、<code>カテゴリー</code>・アーカイブ用テンプレート、<code>個別</code>のエントリー・アーカイブ用テンプレート</p>
<p>新しいアーカイブ・テンプレートを定義するには、「<em>テンプレート</em>」に行き、「<code>新しいアーカイブ・テンプレートを作る</code>」をクリックします。 テンプレートに名前を付け、Movable Typeの「<a href="./mtmanual_tags.html">テンプレートのタグ</a>」を使ってアーカイブ・ページのレイアウトを定義します。 新しいアーカイブ・テンプレートを保存したら、「<em>ウェブログの設定</em>」の「<em>アーカイブの設定</em>」に移動し、「<em>テンプレート:</em>」プルダウン・メニューで先ほど作成したテンプレートを選択し、そのテンプレートに関連づけるアーカイブの種類を、「<em>アーカイブの種類：</em>」メニューから選びます。 そして「<code>追加</code>」ボタンをクリックします。</p>
<p>
</p>
<h2><a name="template_modules">テンプレート・モジュール</a></h2>
<p>Movable Typeを使うと、共通して利用するひとまとまりのHTMLコードをテンプレートとして抽出でき、他のテンプレートに埋め込むことができます。Movable Typeではこうした汎用テンプレートを「<code>テンプレート・モジュール</code>」と呼んでいます。 テンプレート・モジュールの利用例としては、サイト全体で使うヘッダーがあります。 「<code>Header</code>」という新しいテンプレート・モジュールを作成し、共通して利用するヘッダー・コードを貼り付け、新しいテンプレート・モジュールとして保存します。 このコードは<code>MTInclude</code>タグを使うことで、他のすべてのテンプレートに埋め込むことができます。</p>
<pre>
    &lt;$MTInclude module="Header"$&gt;</pre>
<p>このタグは先ほど作った<code>Header</code>テンプレート・モジュールの内容に置き換わります。</p>
<p>こうしておくと、共通して利用するコードを1カ所に保存でき、修正もそのテンプレート・モジュールだけで済むので、作業が楽になります。</p>
<p>
</p>
<h2><a name="miscellaneous_templates">その他のテンプレート</a></h2>
<p>テンプレートの中には、インデックス・テンプレート、アーカイブ・テンプレート、およびカスタム・テンプレートのいずれにも属さないテンプレートがあります。 以下にこうしたテンプレートを列挙します。</p>
<ul>
<li><strong><a name="item_comment_listing_template">コメント・リストのテンプレート</a></strong><br/> </li> このテンプレートは、コメントにポップアップ・ウィンドウを使うよう選択した場合（上記の「<em>コメント</em>」を参照）、コメント・ページのレイアウトを定義します。 <p></p>
<li><strong><a name="item_comment_preview_template">コメント・プレビューのテンプレート</a></strong><br/> </li> このテンプレートは、コメントの確認（プレビュー）を使うよう選択した場合（デフォルトでは選択済み)、コメントの確認ページのレイアウトを定義します。 <p></p>
<li><strong><a name="item_comment_error_template">コメント・エラーのテンプレート</a></strong><br/> </li> このテンプレートは、ユーザーがコメントを投稿した際にエラーが発生したとき、ユーザーに表示されるエラーメッセージを定義します。エラーとは、たとえば、名前やメールアドレスが入力されていない、メールアドレスやURLが無効である、などを指します。 このテンプレートを使うと、コメント投稿時のエラーをユーザー自身が修正してコメントを再投稿できるようにできます。 <p></p>
<li><strong><a name="item_comment_pending_template">コメント・保留のテンプレート</a></strong><br/> </li> コメントの設定によっては、ユーザーが投稿したコメントをすぐにサイトに表示しないようにすることも可能です。たとえば、コメントの事前確認を有効に設定した場合などです。 <p>「コメント保留のテンプレート」は、投稿したコメントがすぐには表示されないよう設定している場合、コメント投稿時にユーザーに表示されるメッセージを定義します。 このメッセージを設定しておくと、ユーザーはコメントが受理されたことを確認でき、コメントが表示されるまで投稿を繰り返す試みを止めてくれます。</p>
<p></p>
<li><strong><a name="item_trackback_listing_template">トラックバック・リストのテンプレート</a></strong><br/> </li> このテンプレートは、システムで特定のエントリーに送られたトラックバックpingを一覧表示するポップアップ・ウィンドウのレイアウトを定義します(「<a href="./mtmanual_trackback.html">トラックバック・システムについてのドキュメント</a>」を参照)。 <p></p>
<li><strong><a name="item_uploaded_image_popup_template">画像のポップアップウィンドウのテンプレート</a></strong><br/> </li> 画像をアップロードすると、新しいエントリーにその画像を埋め込むか、その画像へのリンクを張るかの選択を、ポップアップ・ウィンドウで尋ねられます。 リンクを張ることを選択し、「<a href="#item_uploaded_image_popup_template"><code>画像のポップアップ・ウィンドウのテンプレート</code></a>」のレイアウトを定義した場合は、ポップアップ・ウィンドウにその画像を含むように、HTMLファイルが自動作成されます。 このテンプレートには以下の3つのテンプレート・タグを使うことができます： <code>&lt;$MTImageURL$&gt;</code>、<code>&lt;$MTImageWidth$&gt;</code>、および<code>&lt;$MTImageHeight$&gt;</code> <p></p></ul>
<p>
</p>
<h2><a name="editing_a_template">テンプレートの編集</a></h2>
<p> テンプレートの種類や、テンプレート・モジュールとテンプレートのどちらを編集するかで、テンプレート編集画面の内容はやや異なります。 たとえば、「<a href="#item_output_file"><code>出力ファイル名</code></a>」は「<code>インデックス・テンプレート</code>」に対してだけ割り当てられます。</p>
<p>以下は「<code>テンプレートの編集</code>」画面で表示されるフィールドです。</p>
<ul>
<li><strong><a name="item_name">テンプレートの名前</a></strong><br/> </li> これは「<code>テンプレートの編集</code>」画面で指定するテンプレートの名前です さらに、<code>&lt;MTInclude&gt;</code>を使ってテンプレート・モジュールを含める場合は、そのテンプレート・モジュール名もこのフィールドで指定する必要があります。 <p>テンプレート名は、インデックス・テンプレートとテンプレート・モジュールに限り、変更可能です。アーカイブ・テンプレートとその他のテンプレートの名前は自動的に割り当てられます。</p>
<p></p>
<li><strong><a name="item_output_file">出力ファイル名</a></strong><br/> </li> インデックス・テンプレートを編集するときには、テンプレートの出力先のファイル名を指定する必要があります。 たとえば、メイン・インデックス・テンプレートの出力ファイルは<em>index.html</em>になることもあります。 <p>出力ファイルはインデックス・テンプレートだけに適用されます。 出力ファイル名は、あなたの<em>ローカル・サイト・パス</em>に対しての相対パス(たとえば、<em>file.html</em>)にすることも、ファイルシステムのルートからのフルパス(たとえば、<em>/full/path/to/file.html</em>)にすることもできます。</p>
<p></p>
<li><strong><a name="item_rebuild_this_template_automatically">インデックス・テンプレートを再構築するときにこのテンプレートを自動的に再構築する</a></strong><br/> </li> インデックス・テンプレートを編集するときに、テンプレートの再構築を自動的に行う方法と手動で行う方法の2つのオプションがあります。自動的な再構築を選ぶと、エントリーを保存するたびに、すべてのファイルが再構築されるか、あるいはインデックスが再構築されます。 通常は、インデックス・テンプレートを自動的に再構築する方を選択してください。 だだし、インデックス・テンプレートを使って主にスタティック・コンテンツを管理しているときなど、エントリーを新しく加えるたびにインデックス・テンプレートを再構築しなくてもよい場合もあります。 スタティックなインデックス・テンプレートを不必要に再構築すると、新しいエントリーの追加プロセスが遅くなります。 <p>このオプションを使うと、インデックス・テンプレートの自動的な再構築をオフにできます。 自動的な再構築をオフにした後、インデックス・テンプレートを再構築する<strong>唯一の方法</strong>は、「<em>テンプレートの編集</em>」でテンプレートの名前をクリックし、テキスト編集ボックスの下にある「<em>再構築</em>」ボタンをクリックする方法です。 これによって指定されたインデックス・テンプレートは再構築されます。</p>
<p></p>
<li><strong><a name="item_link_this_template_to_a_file">このテンプレートにリンクするファイル</a></strong><br/> </li> テンプレートの内容を編集するとき、Movable Typeのウェブ・アプリケーション以外で編集した方が簡単な場合もよくあります。たとえば、コードがハイライトされるテキスト・エディタでHTMLを編集するのを好む人が多くいます。 Movable Typeのテンプレートを外部のファイルにリンクすると、Movable Typeにあるテンプレートのコピーをその外部のファイルと同期しながら、外部のアプリケーションでテンプレートを編集することができます。 同期プロセスは双方向に働きます。テンプレートを編集するとき、リンクされている外部のファイルが最新のファイルがどうかチェックされます。Movable Typeでテンプレートを保存するときは、変更に応じて外部のリンクされているファイルも更新されます。 <p>リンクされているファイル名の値は、外部ファイルまでのファイルシステムへのフル・パス、あるいはウェブログの<code>ローカル・サイト・パス</code>に対しての相対パスのどちらかにしてください。 ファイルの拡張子は、セキュリティ上の理由から、<em>.cgi</em>、<em>.pm</em>、<em>.pl</em>、または<em>.cfg</em>にはできません。したがって、Movable Typeのプログラム・ファイルが上書きされることはありません。 たとえば、<code>メイン・インデックス</code>・テンプレートを外部のエディタで編集・更新する場合、リンクした外部のファイル名を<em>index.html.tmpl</em>などの値に指定します。 すると、このファイルを外部で編集してウェブサーバーに保存できます。再構築するときは、Movable Typeがこのリンクした<em>index.html.tmpl</em>ファイルの最新バージョンにアクセスし、それをテンプレートとして使います。さらにMovable Typeは、Movable Typeのデータベースにあるテンプレートのコピーも更新します。したがって、次回、Movable Typeでテンプレートが必要なときに、Movable Typeはデータベースにあるそのコピーを使うことができます。</p>
<p><strong>注：</strong>新しいテンプレートをテンプレートの中身を指定せずに作成し、すでに存在しているファイルにリンクすると、そのファイルの内容がテンプレートに読み込まれます。 ただしテンプレートの中身を<em>指定し</em>、既存のファイルにリンクすると、そのリンクしたファイルの内容は、指定したテンプレートの中身に置き換わります</p>
<p>外部のファイルにテンプレートをリンクさせる機能はオプションです。Movable Typeのアプリケーションだけですべてのテンプレートを更新していくこともできます。</p>
<p></p>
<li><strong><a name="item_template_body">テンプレートの中身</a></strong><br/> </li> テンプレートの中身には、テンプレートのタグ(「<a href="./mtmanual_tags.html">テンプレートのタグ</a>」を参照)やその他のマークアップ(HTMLなど)を含みます。 <p></p></ul>
<p>
</p>
<h2><a name="default_templates">デフォルト・テンプレート</a></h2>
<p>Movable Typeは、スタイルシートでカスタマイズできるデフォルト・テンプレートのセットを搭載しています。 これらのデフォルト・テンプレートは<a href="http://www.movabletype.jp/default_templates.shtml">http://www.movabletype.jp/default_templates.shtml</a>で閲覧できます。</p>
<p>ウェブログに新しいスタイルを適用するには、以下の手順に従います。</p>
<ol>
<li> Movable Typeにログインして、編集するウェブログを選択し、「<code>テンプレート</code>」をクリックします。 <p></p></li>
<li> インデックス・テンプレートのリストに、<code>Stylesheet</code>と呼ばれるテンプレートが表示されています。それを編集するために開きます。 <p></p></li>
<li> あなたのページのカスタマイズに用いるこれら既製のスタイルシートは<a href="http://www.movabletype.jp/default_styles.shtml">http://www.movabletype.jp/default_styles.shtml</a>にあります。 このページには、各スタイルのスクリーンショットが表示されています。使うスタイルを選択したら、テキストボックスの中身をコピーして、ステップ2で編集するために開いたテンプレートの「<a href="#item_template_body"><code>テンプレートの中身</code></a>」に貼り付けます。 <p></p></li>
<li> 「<code>保存</code>」ボタンを押して新しいスタイルシートを保存します。 <p></p></li>
<li> サイトを再構築することを促すプロンプトが表示されるので、「<code>再構築</code>」リンクをクリックして、プルダウン・メニューから「<code>インデックスだけ</code>」を選び、「<code>再構築</code>」ボタンをクリックします。 <p></p></li>
<li> 再構築が完了すると、サイトには新しいスタイルシートが適用れています。 <p><strong>注：</strong>ブラウザ(たとえばInternet Explorer) の中には、一度スタイルシートをロードすると、再びウェブサーバーからロードしないものがあります。サイトを見て見た目が変わっていない場合は、ブラウザのキャッシュを空にして、再び試してみてください。</p>
<p></p></li></ol>

<hr size="1" color="#CCCCCC"> <span class="copyright">Copyright (c) 2001-2004 Six Apart. All Rights Reserved.</span> </body>

</html>
