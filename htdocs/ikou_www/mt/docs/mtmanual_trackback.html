<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>トラックバック</title>
<link rel="stylesheet" href="doc-styles.css" type="text/css"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
<h3>Movable Typeユーザー・マニュアル: トラックバック</h3>
<p><a href="mtmanual.html">≪ 目次</a></p>


<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#trackback">トラックバック</a></li>
	<ul>

		<li><a href="#setting_up_trackback">トラックバックの設定</a></li>
		<li><a href="#using_trackback">トラックバックの使い方</a></li>
		<li><a href="#trackback_ping_format">トラックバックpingのフォーマット</a></li>
		<li><a href="#reference_documentation">参照ドキュメント</a></li>
	</ul>

</ul>
<!-- INDEX END -->

<hr/>
<p>
</p>
<h1><a name="trackback">トラックバック</a></h1>
<p>Movable Typeのトラックバック・システムによって、ウェブログ間で一対一のコミュニケーションや対話が可能になります。 たとえば、あなたがMovable Typeを使ったウェブログに、鑑賞したばかりの映画について書いたとします。 それを、Movable Typeを使っている別のウェブログ作成者（ブロガー）が読み、それについてエントリーを書こうとしています。 彼はあなたのウェブログにコメントを投稿するよりも、そのコメントを自分のデータベースに保管し自分のサイトにホストしたいと考えました。</p>
<p>トラックバックを使うと、別のブロガーがあなたのウェブログにpingを自動送信し、あなた発の投稿に関してエントリーを書いたことを知らせることができます。 それによって、以下の2つが達成できます。</p>
<ol>
<li> あなたのサイトでは、1つの投稿を参照したすべてのサイトを自動的にリストでき、読者は他のユーザーのウェブログにある応答を読むことができます。</li> <p></p>
<li> 別のブロガーのエントリーとあなたのエントリーの間に、確かで明白なリンクが成立します。これは、外部のアクション（あなたのエントリーへのリンクを誰かがクリックすること）による、リンク元ログのような暗示的なリンクとは異なります。</li> <p></p></ol>
<p>しかし、トラックバックは、エントリーについてのコミュニケーション以上の役割を果たします。 トラックバックpingのURLは、ウェブログのカテゴリーに関連づけることもできます。 そしてそのカテゴリーにエントリーを投稿するたびに、関連付けたURLに、その投稿を通知することができます。 これによって、別のサイトではウェブ中に存在する投稿の参照先を蓄積していくことができます。</p>
<p>たとえば、あなたがPerlについてのサイトを開いているとします。そして他のウェブログにあるPerlの記事へのリンク集を提供したいと考えました。 トラックバックを使うと、別のウェブログからも、あるカテゴリーに属する新しいエントリーが投稿されるたびに、あなたのウェブログの該当するカテゴリーにpingを送信することができます。</p>
<p>これらはトラックバックの使用例にすぎません。 トラックバック自体は、ウェブログ間で一対一のコミュニケーションを実現するフレームワークです。トラックバックは、ウェブログ間の議論を追跡したり、別のコンテンツへのリンクを提供したり、ゲストによるエントリー作成をエミュレートしたり、そのほか、いろいろなことができます。 トラックバックのメカニズムはとても単純です。 別のサイトにあなたの存在を知らせたい場合は、そのサイトにpingを送信します。 これらのping（簡単なHTTP GETリクエスト）のフォーマットは<a href="#trackback_ping_format">後述</a>します。 Movable Typeにトラックバックを実装するにあたり、シックスアパート社では、カテゴリー対象のping送信、特定のIPアドレスの禁止、自動RSS出力、および新しいpingのメール通知といったアクションに対し、パスワードで保護しました。</p>
<p>つまり、私達はMovable Typeのユーザー以外の方々にもトラックバックからの恩恵を受け、活用してもらいたいと考えています。 この機能をぜひ他のウェブログのツールにも統合してもらいたいと考えています。そのために、pingのフォーマットを下に公開し、基本的なフレームワークをとても簡素なものにしています。 この件に関するご質問は<a href="mailto:trackback@movabletype.org">trackback@movabletype.jp</a>宛てにメールで遠慮なくお問い合わせください。</p>
<p>
</p>
<h2><a name="setting_up_trackback">トラックバックの設定</a></h2>
<p>新しくMovable Typeを使う場合は、トラックバックのタグがデフォルト・テンプレートに含まれているため、Movable Typeをインストールすれば直ちにトラックバックを使用できます。 以下のステップ5まで飛ばします。</p>
<p>既にMovable Typeを使っている場合は、テンプレートをトラックバックpingが扱えるように設定する必要があります。 以下のステップ1から始めてください。</p>
<ol>
<li><strong><a name="item_create_a_trackback_listing_template%2e">トラックバック・リストのテンプレートを作成する</a></strong><br/> </li>
「<em>テンプレートのリスト</em>」で、「<em>トラックバック・リストのテンプレート</em>」を編集し、それをデフォルト・テンプレートの本文で初期化します。 デフォルト・テンプレートは以下にあります。
<pre>
    <a href="http://www.movabletype.org/default_templates.shtml#trackback">http://www.movabletype.org/default_templates.shtml#trackback</a></pre>
<p></p>
<li><strong><a name="item_update_your_stylesheet%2e">スタイルシートを更新する</a></strong><br/> </li>
エントリーのトラックバックpingが、エントリーのコメントを一覧表示するときのように、ポップアップ･ウィンドウにすべて表示されます。 ステップ1で加えたデフォルト・テンプレートは、バージョン2.2で新しくなったCSSスタイルの一部を使っています。 Movable Type搭載のデフォルト・スタイルのいずれかを使っている場合は、以下のスタイルからコピーして更新されたバージョンに貼り付けます。
<pre>
    <a href="http://www.movabletype.org/default_styles.shtml">http://www.movabletype.org/default_styles.shtml</a></pre>
<p>独自のスタイルシートを使っている場合は、<em>トラックバック・リストのテンプレート</em>をカスタマイズしてあなたのサイトのスタイルに一致させるか、<em>.trackback-url</em>、<em>.trackback-body</em>、および<em>.trackback-post</em>クラスに新しいCSSスタイルを加えます。</p>
<p></p>
<li><strong><a name="item_add_trackback_code_to_your_main_index_template%2e">トラックバック・コードをメイン･インデックス・テンプレートに加える</a></strong><br/> </li>
メイン・インデックス・テンプレートの&lt;script&gt;セクションに、以下のコードを加えます。
<pre>
    function OpenTrackback (c) {
        window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
    }</pre>
<p>次に、&lt;MTEntries&gt;タグ内に、以下のコードを加え、各エントリーのトラックバック・リストへのリンクを表示します。</p>
<pre>
    &lt;MTEntryIfAllowPings&gt;
    | &lt;a href="&lt;$MTCGIPath$&gt;mt-tb.cgi?__mode=view&amp;entry_id=&lt;$MTEntryID$&gt;" onclick="OpenTrackback(this.href); return false"&gt;TrackBack
    (&lt;$MTEntryTrackbackCount$&gt;)&lt;/a&gt;
    &lt;/MTEntryIfAllowPings&gt;</pre>
<p></p>
<li><strong><a name="item_add_trackback_ping_data_to_index_and_archive_templ">トラックバックpingデータをインデックス・テンプレートとアーカイブ・テンプレートに加える</a></strong><br/> </li>
メイン･インデックス・テンプレート、およびカテゴリーと日付に基づくアーカイブ・テンプレートにあるメイン<code>&lt;MTEntries&gt;</code>タグの直後に、以下のタグを加えます。
<pre>
    &lt;$MTEntryTrackbackData$&gt;</pre>
<p>次に、個別のエントリー・アーカイブ・テンプレートのどこかに、以下の同じタグを加えます。</p>
<pre>
    &lt;$MTEntryTrackbackData$&gt;</pre>
<p>再構築すると、これがあなたの公開ファイルに必要な情報を加え、それによってMovable Typeのブックマークレットが、トラックバックの許可されているエントリーを解析して、これらのエントリーのping URLを獲得できるようになります。</p>
<p></p>
<li><strong><a name="item_create_a_trackback%2denabled_bookmarklet%2e">トラックバック有効のブックマークレットを作成する</a></strong><br/> </li> トラックバック有効のブックマークレットとは、標準のMovable Typeブックマークレットに新しい機能を1つ加えた新しいバージョンにすぎません。 その新機能とは、ブックマークレットを使ってウェブログに投稿するときに、ブックマークレットがブラウザの現在開いているページを見て、そこにトラックバックが有効になったエントリーがあるかどうかをチェックできる、という機能です。 (この情報はステップ4で加えたタグを使って獲得します)。 該当するエントリーがあった場合は、ブックマークレットを使って、トラックバック有効のエントリーのリストからいずれかを選択できます。こうしたエントリーは、新しい投稿についてpingを送信できるページ上にあります。 新しいエントリーを投稿すると、Movable Typeは自動的に該当するエントリーのURLにpingを送信します。これは、あなたが「<em>トラックバック先のURL</em>」ボックスに手動でURLを入力する作業と似ています。 <p>これがトラックバックを使って別のサイトにある投稿を参照するプロセスを簡素化します。</p>
<p>ブックマークレットをすでに使っている場合は、現在使っている同じフィールドに加え、「<em>トラックバックする</em>」フィールドも使い、ブックマークレットを再び作成します。 ブックマークレットをまだ使っていない場合は、新しく作成します。</p>
<p>「<em>メインメニュー</em>」に移動し、「<code>クイックポストの作成</code>」をクリックします。 表示される指示に従って新しいブックマークレットを作成し、「<em>トラックバックする</em>」フィールドを含んでいることを確認します。</p>
<p></p>
<li><strong><a name="item_that%27s_it%21">これで完了！</a></strong><br/> </li> これで、トラックバック・システムを使えるようになりました。 <p>ブックマークレットはブラウザで以下のページにアクセスすると、テストできます。</p>
<pre>
    <a href="http://www.movabletype.org/trackback/">http://www.movabletype.org/trackback/</a></pre>
<p>ブラウザがそのページを表示したら、Movable Typeのブックマークレットをクリックします。 開いたウィンドウの上部には、「<em>トラックバックするエントリーを選んでください:</em>」というプルダウン・メニューが表示されているはずです。 メニューには、上のページにあるトラックバック有効のエントリーがすべて一覧されています。</p>
<p>メニューが表示されていると、ブックマークレットは機能しており、トラックバックの使用を開始できる状態です。</p>
<p>メニューが表示されていない場合は、<em>mt-check.cgi</em>を実行し、<em>LWP::UserAgent</em>がインストールされているかどうかをチェックします。 このモジュールはトラックバックを使うのに必要です。</p>
<p></p></ol>
<p>
</p>
<h2><a name="using_trackback">トラックバックの使い方</a></h2>
<p>トラックバックは、一般的に、別々のサイトにあるエントリーの間でコミュニケーションを取るためと、別々のサイトにあるカテゴリーの間でコミュニケーションを取るための2つの目的で使用できます。 さらに、それぞれのシナリオで、あなたはエントリーを投稿するコンテンツ作成者になることも、トラックバック・アイテム（エントリーであってもカテゴリーであっても）に関する投稿エントリーのリストを集めるコンテンツ収集者になることもできます。</p>
<ul>
<li><strong><a name="item_entry%2dto%2dentry_communication">エントリー対エントリーのコミュニケーション</a></strong><br/> </li> <strong>コンテンツ収集者として：</strong> あなたが投稿した新しいエントリーに対し、他のユーザーがpingを送信することを許可する場合は、「<em>トラックバックを受けいれる</em>」チェックボックスをチェックします。 すると、トラックバック先URLは、トラックバックのポップアップ･ウィンドウに表示されると同時に個別のアーカイブ・ページ上の&lt;link&gt;タグ内に保存され、Movable Typeのブックマークレットがそれを自動的に使用できるようになります。 <p><strong>コンテンツ作成者として：</strong>新しいエントリーを投稿し、別のウェブサイトのエントリーにpingを送信する場合は、上述の「<em>トラックバックの設定</em>」のステップ5で設定したMovable Typeのブックマークレットを使い投稿することも、手動で「新しいエントリー/エントリーの編集」画面に別のサイトのトラックバックping URLを加えることもできます。</p>
<p></p>
<li><strong><a name="item_category%2dto%2dcategory_communication">カテゴリー対カテゴリーのコミュニケーション</a></strong><br/> </li> <strong>コンテンツ収集者として：</strong> カテゴリーを「<em>トラックバックを受けいれる</em>」に指定することができます。 これによってそのカテゴリーにトラックバック・アイテムを設定でき、別のサイトがあなたのサイトにpingを送信し、そのカテゴリーに合う新しいエントリーについてあなたに通知できるようになります。 これらのpingはそのときあなたのサイトに表示されるので、特定のトピックについてのリンク集を作成できます。 <p><strong>コンテンツ作成者として：</strong> トラックバック先のURLのリストを1つのカテゴリーに関連付けられます。 あなたのサイトで新しいエントリーをこのカテゴリーに投稿すると、リストにある各URLはこの新しいエントリーの情報とともにpingされます。</p>
<p></p></ul>
<p>pingがあなたのサイトのトラックバック・アイテムに送られると、システムは、Movable Typeのデータベースにpingを保存するほか、トラックバック・アイテムのRSSフィードを更新します。 XML出力は、ローカル・アーカイブ・パスにある<em>ID.xml</em>というファイルに保存されます。そこでは<em>ID</em>がトラックバック・アイテムの数字から成るIDになっています。</p>
<p>
</p>
<h2><a name="trackback_ping_format">トラックバックpingのフォーマット</a></h2>
<p>トラックバックは、pingにRESTモデルを使い、各トラックバック・アイテムが、その数字から成るIDによって固有のURLを有することを確認します。</p>
<ul>
<li><strong><a name="item_sending_a_ping">pingの送信</a></strong><br/> </li>
リクエストがHTTP GETを介して、通常以下のようにping先URLに送られます。
<pre>
    <a href="http://foo.com/mt/mt-tb.cgi?tb_id=ID">http://foo.com/mt/mt-tb.cgi?tb_id=ID</a></pre>
<p>上の<code>ID</code>は、トラックバック・アイテムの数字から成るIDです。 リクエスト・パラメータは以下のようにURLの最後に追加されます。</p>
<pre>
    <a href="http://foo.com/mt/mt-tb.cgi?tb_id=ID&amp;title=TITLE&amp;url=URL">http://foo.com/mt/mt-tb.cgi?tb_id=ID&amp;title=TITLE&amp;url=URL</a></pre>
<p>上は一例です。クエリーのパラメータには以下があります： <em>title</em> (エントリーのタイトル)、<em>excerpt</em> (エントリーの概要。80文字以上の場合は80文字に削られ、最後に「<code>...</code>」が付加)、<em>url</em> (エントリーのパーマリンク（permalink）)、および<em>blog_name</em> (エントリーが投稿されたウェブログ名)。</p>
<p>応答は、簡単なXMLフォーマットで、アプリケーション・レベルのエラー検出が有効です。HTTPレベルのエラーは、たとえば、トラックバック先のURLがサーバー上に存在しない場合にping送信すると、<code>404</code>エラーが返されるなどの形を取ります。</p>
<p>ping送信に成功すると、以下の応答が返ります。</p>
<pre>
    &lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
    &lt;response&gt;
    &lt;error&gt;0&lt;/error&gt;
    &lt;/response&gt;</pre>
<p>ping送信に失敗すると、以下の応答が返ります。</p>
<pre>
    &lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
    &lt;response&gt;
    &lt;error&gt;1&lt;/error&gt;
    &lt;message&gt;The error message&lt;/message&gt;
    &lt;/response&gt;</pre>
<p>アプリケーションはもちろん、将来必要なときに備え、フィールドを追加できるようにしておくべきです。 ただし、応答のXML構造は将来も同じです。</p>
<p></p>
<li><strong><a name="item_retrieving_pings">pingの取得</a></strong><br/> </li>
あるトラックバック・アイテムに作成されたpingのリストを取得するには、以下のフォーマットのURLを使います。
<pre>
    <a href="http://foo.com/mt/mt-tb.cgi?tb_id=ID&amp;__mode=rss">http://foo.com/mt/mt-tb.cgi?tb_id=ID&amp;__mode=rss</a></pre>
<p>上の<code>ID</code>は、トラックバック・アイテムの数字から成るIDです。</p>
<p>このリクエストへの応答は、このリクエストに対するエラーが同じフォーマットで返るか、<code>&lt;response&gt;</code>タグに挟まれたRSSマークアップに、そのトラックバック・アイテムのトラックバックpingが列挙されているかのいずれかです。</p>
<p>以下に例を挙げます。</p>
<pre>
    &lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
    &lt;response&gt;
    &lt;error&gt;0&lt;/error&gt;
    &lt;rss version="0.91"&gt;&lt;channel&gt;
    &lt;title&gt;TrackBack Test&lt;/title&gt;
    &lt;link&gt;http://this.is/the/trackback/item/link/&lt;/link&gt;
    &lt;description&gt;Description of the TrackBack item&lt;/description&gt;
    &lt;language&gt;en-us&lt;/language&gt;
    &lt;item&gt;
    &lt;title&gt;TrackBack Demo&lt;/title&gt;
    &lt;link&gt;http://this.is/the/permalink/&lt;/link&gt;
    &lt;description&gt;Excerpt&lt;/description&gt;
    &lt;/item&gt;
    &lt;/channel&gt;
    &lt;/rss&gt;&lt;/response&gt;</pre>
<p></p></ul>
<p>
</p>
<h2><a name="reference_documentation">参照ドキュメント</a></h2>
<p>トラックバック関連要素についてのドキュメントは以下にあります。</p>
<ul>
<li><strong><a name="item_trackback_tags">トラックバックのタグ</a></strong><br/> </li>
<ul>
<li><strong><a name="item_%3cmtpings%3e_and_related_tags%7cmtmanual_tags%2f%"><a href="./mtmanual_tags.html#trackback_tags">&lt;MTPings&gt;と関連タグ</a></a></strong><br/> </li>
<li><strong><a name="item_%3c%24mtentrytrackbackcount%24%3e%7cmtmanual_tags%"><a href="./mtmanual_tags.html#item_MTEntryTrackbackCount">&lt;$MTEntryTrackbackCount$&gt;</a></a></strong><br/> </li>
<li><strong><a name="item_%3c%24mtentrytrackbackdata%24%3e%7cmtmanual_tags%2"><a href="./mtmanual_tags.html#item_MTEntryTrackbackData">&lt;$MTEntryTrackbackData$&gt;</a></a></strong><br/> </li>
<li><strong><a name="item_%3cmtentryifallowpings%3e%7cmtmanual_tags%2fitem_m"><a href="./mtmanual_tags.html#item_MTEntryIfAllowPings">&lt;MTEntryIfAllowPings&gt;</a></a></strong><br/> </li>
<li><strong><a name="item_%3c%24mtentrytrackbacklink%24%3e%7cmtmanual_tags%2"><a href="./mtmanual_tags.html#item_MTEntryTrackbackLink">&lt;$MTEntryTrackbackLink$&gt;</a></a></strong><br/> </li>
<li><strong><a name="item_%3c%24mtcategorytrackbacklink%24%3e%7cmtmanual_tag"><a href="./mtmanual_tags.html#item_MTCategoryTrackbackLink">&lt;$MTCategoryTrackbackLink$&gt;</a></a></strong><br/> </li>
</ul>
<li><strong><a name="item_trackback_fields_on_the_new%2fedit_entry_screen">「new/edit entry（新しいエントリー/エントリーの編集）」画面のトラックバック関連フィールド</a></strong><br/> </li>
<ul>
<li><strong><a name="item_allow_pings%7cmtmanual_entries%2fitem_allow_pings"><a href="./mtmanual_entries.html#item_allow_pings">トラックバックを受けいれる</a></a></strong><br/> </li>
<li><strong><a name="item_url"><a href="./mtmanual_entries.html#item_urls_to_ping">トラックバック先のURL</a></a></strong><br/> </li>
<li><strong><a name="item_previous_pings_sent%7cmtmanual_entries%2fitem_prev"><a href="./mtmanual_entries.html#item_previous_pings_sent">いままでに送信したトラックバック</a></a></strong><br/> </li>
</ul>
<li><strong><a name="item_trackback_fields_on_the_edit_category_screen">「カテゴリーの編集」画面のトラックバック関連フィールド</a></strong><br/> </li>
<ul>
<li><strong><a name="item_trackback_urls_to_ping%7cmtmanual_categories%2fite"><a href="./mtmanual_categories.html#item_trackback_urls_to_ping">トラックバック先URL</a></a></strong><br/> </li>
<li><strong><a name="item_accept_incoming_trackback_pings%7cmtmanual_categor"><a href="./mtmanual_categories.html#item_accept_incoming_trackback_pings">トラックバックを受けつけます</a></a></strong><br/> </li>
</ul>
<li><strong><a name="item_ip_banning%7cmtmanual_weblog_config%2f%22ip_bannin"><a href="./mtmanual_weblog_config.html#ip_banning">禁止IP</a>: あなたのサイトにトラックバックpingを送信することを禁止するユーザーの指定</a></strong><br/> </li>
<li><strong><a name="item_xml%2drpc_interface%7cmtmanual_programmatic%3a_mt%"><a href="./mtmanual_programmatic.html">XML-RPCインタフェース</a>: mt.getTrackbackPings</a></strong><br/> </li>
</ul>

<hr size="1" color="#CCCCCC"> <span class="copyright">Copyright (c) 2001-2004 Six Apart. All Rights Reserved.</span> </body>

</html>
