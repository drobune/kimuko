############################################################################### WWWBoard                      Version 2.0 ALPHA 2                          ## Copyright 1996 Matt Wright    mattw@worldwidemart.com                      ## Created 10/21/95              Last Modified 11/25/95                       ## Scripts Archive at:           http://www.worldwidemart.com/scripts/        ################################################################################ If you run into any problems while trying to configure this scripts, help  ## is available.  The steps you should take to get the fastest results, are:  ##       1) Read this file thoroughly					                     ##       2) Consult the Matt's Script Archive Frequently Asked Questions:     ##               http://www.worldwidemart.com/scripts/faq/	                 ##       3) If you are still having difficulty installing this script, send   ##          e-mail to: scripts-help@tahoenet.com				                 ##          Include any error messages you are receiving and as much detail   ##          as you can so we can spot your problem.  Also include the variable##          configuration block that is located at the top of the script.     ##									                                         ## Hopefully we will be able to help you solve your problems.  Thank you.     ################################################################################ COPYRIGHT NOTICE                                                           ## Copyright 1996 Matthew M. Wright  All Rights Reserved.                     ##                                                                            ## WWWBoard may be used and modified free of charge by anyone so long as      ## this copyright notice and the comments above remain intact.  By using this ## code you agree to indemnify Matthew M. Wright from any liability that      ## might arise from it's use.                                                 ##                                                                            ## Selling the code for this program without prior written consent is         ## expressly forbidden.  In other words, please ask first before you try and  ## make money off of my program.                                              ##                                                                            ## Obtain permission before redistributing this software over the Internet or ## in any other medium.  In all cases copyright and header must remain intact.################################################################################ WWWBoard                      バージョン 2.0 アルファ 2                    ## Copyright 1996 Matt Wright    mattw@worldwidemart.com                      ## 製作 95/10/21                 最終改正 95/11/25                            ## スクリプトアーカイブの所在:   http://www.worldwidemart.com/scripts/        ################################################################################ このスクリプトを設定しようとしている最中に問題に陥った場合は、お手伝いする ## ことができます。早く結果を得るには、次の順番にしたがってください:          ##       1) このファイルを熟読してください。                                  ##       2) 次の「Matt's Script Archive」の「Frequently Asked Questions」にあ ##          たってください:                                                   ##               http://www.worldwidemart.com/scripts/faq/                    ##       3) それでもなお、このスクリプトのインストールが困難な場合は、ここに  ##          e メールを送ってください: scripts-help@tahoenet.com               ##          私たちが問題点を見つけられるように、表示されるエラーメッセージす  ##          べてとできる限りの詳細を書いてください。スクリプトの最上部にある  ##          変数の設定の部分も書いてください。                                ##                                                                            ## 問題解決のお役に立てるものと思います。                                     ################################################################################ 著作権の告知                                                               ## Copyright 1996 Matthew M. Wright  All Rights Reserved.                     ##                                                                            ## この著作権の告知および上記のコメントに手を加えない限り、何人も無償で       ## WWWBoard を使用し改変することができます。当コードを使用することにより、使  ## 用者は Matthew M. Wright に対して、使用によって生じる可能性のあるいかなる  ## 責務に関しても免責を保証したものとします。                                 ##                                                                            ## 事前の書面による同意を得ることなしに当プログラムのコードを販売することは、 ## 明確に禁止します。換言すれば、私のプログラムから金銭を得ようとする前に、ま ## ず問い合わせてください。                                                   ##                                                                            ## インターネットもしくは何らかの媒体を介して当ソフトウェアを再配布する前に、 ## 許可を得てください。いかなる場合も、著作権およびヘッダに手を加えることは禁 ## 止します。                                                                 ###############################################################################WWWBoard は、私の Bulletin Board Message System のバージョン 2.0 です。呼称はずいぶんよくなって、文字数もかなり減ったと思います。バージョン 2.0 には強化された点が多くあり、これらはバージョン 1.0 には一切なかったものです。バージョン 1.0 におけるバグの「多く」は修正されましたが、恐らくさらにバグが発見されるものと思っています。メッセージシステムの当バージョンは、前バージョンを完全に書き直したものであり、下位互換性はまったくありません。この新バージョンを使用するためには、過去の全メッセージを削除して最初からやり直せばよいだけです。明らかにそれだけの価値があるものと思っています。WWWBoard バージョン 2.0 では、掲示板を動かすために必要なスクリプトの数を三つから一つへ減らすことに成功しました。このことによって、動作がかなり効率的になるのです。WWWBoard バージョン 2.0 アルファ 2 には以下のファイルがついているはずです。	a.  ALPHA-2       - お読みください。	1.  README        - インストールに必須の説明書。当ファイル。	2.  wwwboard.pl   - すべてを動作させる Perl の CGI スクリプト。	3.  wwwboard.html - ユーザが目にする HTML の WWWBoard ファイル。	4.  faq.html      - wwwboard のユーザが見るための FAQ ファイル。	5.  data.txt      - ファイル数を保存する場所。	6.  messages/     - メッセージを作成し保存する場所。	7.  wwwadmin.pl   - メッセージを削除するための管理ツール。	8.  passwd.txt    - WWWAdmin 用の暗号化パスワードとユーザ名。	9.  ADMIN_README  - WWWAdmin の README ファイル。WWWBoard バージョン 2.0 についてくるファイルのうちいくつかは手作業で編集する必要があります。必要なすべてのファイルにどのように手を加えればよいかを以下に説明します。___________________________________________________________________________				WWWBOARD.PL				===========このファイルは、あなたが利用しているサーバの cgi-bin 内に置かなければなりません。もしくは、あなたの利用サーバで .cgi 拡張子が使える場合は、このファイルを wwwbpard.cgi にリネームし、下の $cgi_url 変数がこれを反映するように変更するだけでかまいません。また、このファイルは 755 にモード変更する必要があります。cgi-bin あるいはモード変更のコマンドに関する情報については、いずれもシステム管理者に問い合わせてください。これは手を加える必要があるファイルの中では最も複雑なものです。このファイルには、数多くの変数や多数のオプションが備わっています。以下にすべての変数の設定方法とオプションの働きをまとめておきます。############################################################################ 変数を定義$basedir = "/path/to/wwwboard";	この変数には、あなたの wwwboard ディレクトリへの絶対システムパス	が入っていなければなりません。/home/yourname/public_html にすべて	のファイル入れて、この下に「wwwboard」というディレクトリを作る場	合は、$basedir を次のように設定します:	/home/yourname/public_html/wwwboard$baseurl = "http://your.host.xxx/wwwboard";	これは wwwboard を入れておくディレクトリに対する拠点となる URL で	す。あなたのメインディレクトリが http://your.host.xxx/~yourname/	で呼び出されるとすると、$baseurl は次のように設定します:	http://your.host.xxx/~yourname/wwwboard$cgi_url = "http://your.host.xxx/cgi-bin/wwwboard.pl";	これは wwwboard.pl の所在地を示す URL です。フォローアップのフォ	ームの応答に使われるので、正確でなければなりません。$mesgdir = "messages";	これは $basedir に属するメッセージディレクトリの名前です。wwwboard	のメッセージは、すべてこのディレクトリ内で作成され保管されます。$datafile = "data.txt";	これも $basedir に属するデータファイルの名前です。現在のファイル	名総数を保管し、スクリプトはこれを読み込んで、このファイルからメ	ッセージのファイル名を決定します。$mesgfile = "wwwboard.html";	これは wwwboard.html ファイルの名前ですが、URL を短縮するために、	index.html にリネームしたい場合もあると思います。$basedir と $baseurl	の双方に属し、このファイルに対する URL と絶対パスを決定しますが、	スクリプトによる URL 参照のためでもあり、スクリプトによるこのファ	イルの編集のためでもあります。$faqfile = "faq.html";	これは、WWWBoard に関する「頻繁になされる質問集」ファイルにユーザ	がたどり着けるように $baseurl に属する faq.html ファイルに対する	パスです。$ext = "html";	これは、各ファイルが作成されるときには必ずつく拡張子です。通常時	は html のままですが、dos ベースのプラットフォームで扱うときは、	「htm」に変換できます。$date_command = "/bin/date";	これは「date」コマンドに対するパスである必要があります。当スクリ	プトは、date コマンドを使って、日時に沿ったタイムスタンプを個々の	メッセージに押し、短縮形の「記入」日時を wwwboard.html のページに	表示します。$title = "WWWBoard バージョン 2.0 テスト";	これは WWWBoard の題名であり、各メッセージページ上で使用されるも	のです。自分の伝言板は好きなように呼べばいいですが、上の題名はも	うちょっとパッとしたものに変えることをお勧めします。:-)# 完了###########################################################################オプションにも設定の必要のあるものがいくつかあります。############################################################################ オプションの設定$show_faq = 1;          # 1 - YES; 0 = NO	このオプションによって、各メッセージページ上で FAQ へのリンクを表	示させるか否かを選択できます。デフォルトは 1 で、「フォローアップ」、	「フォローアップを投稿」、それに「$title へ戻る」のリンクと並んで、	このリンクがメッセージの最上部に表示されます。これを 0 に設定する	とリンクは消え、1 のままならリンクも表示されたままです。$allow_html = 1;        # 1 = YES; 0 = NO	このオプションによって、投稿文中に HTML 構文を使えるようにするか	否かの選択ができます。使えないようにした場合は、ユーザが <> で括	って送信したものはすべてメッセージから除去されます。このオプショ        ンを「1」に設定すると投稿文中で HTML が使えるようになり、「0」に	設定するとこのオプションはオフにできます。$quote_text = 1;        # 1 = YES; 0 = NO	このオプションを 1 に設定しておくと、フォローアップの本文入力ボッ	クスに前のメッセージが引用されます。引用された本文の前には「:」が	入るので、前投稿で書かれたことと現投稿者が書こうとしていることと	を区別できます。このオプションを「0」に設定すると、新投稿者のため	にフォローアップ本文用のボックスは空欄のままになります。$subject_line = 0;	# 0 = 件名を引用する (編集可能); 1 = 件名を引用する			#   (編集不可); 2 = 件名を引用せず、編集可能。	フォローアップを投稿しようというユーザのために件名を表示させる方	法には三つのオプションがあります。このオプションをデフォルト値で	ある「0」にしておくと、前件名がフォローアップのフォーム内に入り、	ユーザは好きなように件名を編集できます。このオプションを「1」に設	定すると、件名は引用しますが、表示されるだけであり、ユーザは件名	を編集することはできません。最後の三つめのオプションは、$subject_line	変数を「2」に設定すると有効になります。「2」に設定すると件名は引	用されず、代わりに件名の空欄にユーザがフォローアップの件名を書き	込むことになります。$use_time = 1;		# 1 = YES; 0 = NO	このオプションによって、年/月/日の日付とともに時/分/秒の時刻をメ	インページ上で使うか否かを選択できます。新たに記事が追加されると、	年/月/日がメイン wwwboard.html 上に自動的に書き込まれますが、この	変数を「1」のままにしておくと、時/分/秒の時刻も書き込まれます。こ	れは多数の投稿がある伝言板にとってはとても便利ですが、メインペー	ジ上のスペースを節約したい場合は、これを「0」に設定して時/分/秒の	表示が記載されないようにすることも可能です。# 完了###########################################################################やった !  やり遂げました。これは編集が最も大変なファイルだったのですから。___________________________________________________________________________			   WWWBOARD.HTML			   =============wwwboard.html は、wwwboard.pl ファイルの $basedir で定義したディレクトリに置かなければなりません。あなたのウェブサーバの uid (ユーザ ID) がこのファイルに対する書き込みのパーミションを持つように、777 にモード変更する必要があります。wwwboard.pl と比較すると、このファイルで編集が必要なものはずっと少ないです。このファイルで編集しようとするところは三つあります。最初の二つは単にWWWBoard の題名です。現在この二つの行は次のようになっています:<title>WWWBoard バージョン 2.0!</title> および <h1>WWWBoard バージョン 2.0!</h1>「WWWBoard バージョン 2.0!」という題名とヘッダを好きな WWWBoard の呼称に変更しようと思うでしょう。これは wwwboard.pl で定義した変数 $title と恐らく同じものになるはずです。このファイルで編集する必要がある三つめの行は次のようになっています:<form method=POST action="http://your.host.xxx/cgi-bin/wwwboard.pl">action="" 内にある URL を、wwwboard.pl で $cgi_url として定義した URL と同じものに変更する必要があります。これらの変更をおこなってしまえば、このファイルを出て保存すればいいのです。___________________________________________________________________________			 	FAQ.HTML			 	========このファイルを編集する必要はないですが、見出しあるいは題名を変更、もしくは wwwboard のページへ戻るリンクを追加しようと思う場合はこの限りではありません。$basedir ディレクトリ内に置き、名前が wwwboard.pl で定義された $faq_file変数のものを反映するようにしなければなりません。744 にモード変更する必要があります。これによって、だれでも読み出し可能になります。___________________________________________________________________________			       MESSAGES/			       =========これは、同じく wwwboard.pl で定義された $basedir 内におかなければならないディレクトリです。サーバの UID によってメッセージが書き込まれるように、このディレクトリは 777 にモード変更しなければなりません。___________________________________________________________________________				DATA.TXT				========このファイルは wwwboard.pl で定義した $basedir 内に置いて、777 にモード変更するだけです。すると、ウェブサーバが増加した番号をこれに書き込みます。これはファイル名の番号を保管する場所です。___________________________________________________________________________				 README				 ======		  これが最も簡単です。「読む」だけです !___________________________________________________________________________バージョン 2.0 の 1.0 に対する改良点:* 前バージョンのように HTML が投稿をごちゃ混ぜにすることはありません。* オプションがはるかに多くなったので、デザインに柔軟性があります。* CGI プログラムが三つから一つになりました。このことで、すべてがよりスム  ーズで効率的になりました。* ファイル名は 99999 までの増加番号からつけられるので、以前使用されていた  pid 番号ではあり得たようにメッセージが重複することはありません。* その他、枚挙にいとまがないほど多くあります。___________________________________________________________________________バージョンの履歴:バージョン 2.0:		バージョン 1.0 の完全なリライト	  11/4 -	多くの人から入手が可能かどうかのお便りをいただい			たので、アルファ 1 バージョンをリリース。___________________________________________________________________________下記のスクリプトアーカイブで入手可能な私のすべてのスクリプトに関して:http://worldwidemart.com/scripts/これらは無償で提供されます。修正・編集・変更など、これらのスクリプトには好きなように手を加えてもかまいません。お願いしたいことが二つだけありますが、いずれに従わなくても告発することはありません。:-)1)  これらが使われている場所を教えてください。私は自分の作品が働いている    ところを見たいのです。次の場所にあるオンラインフォームを埋めて知らせ    てもらえれば結構です: http://worldwidemart.com/scripts/implement.html2)  スクリプトのどこかに私の名前を残してください。ユーザが気づくようにす    る必要はありませんが、スクリプトのどこかに置いて伝わるようにしてもら    うか、それに類するようにしてもらえれば、ありがたく思います。3)  おっと、そうでした。三つめがあります。でも、これはいちばん気にしませ    ん。私は多くの人が自分のサイトにとどまっていたいがためにあまり外部に    リンクしたくないと思っていることは承知していますが、できることなら私    のスクリプトアーカイブにリンクしていただければありがたいと思います。    もういちど言いますが、これは必須事項ではありません。4)  規則はこのへんにしておけば、ですって ?  次の最後のを守るのは簡単です:  			***楽しんでください !***___________________________________________________________________________Matt Wright * mattw@worldwidemart.com * http://worldwidemart.com/scripts/